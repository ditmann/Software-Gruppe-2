@startuml
'https://plantuml.com/sequence-diagram

actor Timmy
boundary Client
entity API
entity JourneyPlannerService as jps
entity LocationPort
control CoordinateDTO as cdto
entity DBHandlerPort as dbh
entity EnturHttpClient as Entur
entity DBService as dbs
entity TripFileHandler
control TripPartDTO as tpdto
entity FindBestTripService as bts
database DBImplementation as dbi


'------------'

note left of Timmy: is logged in, has opened favorites
Timmy -> Client: Turn

Client -> API: Going to Turn
API -> jps: Going to Turn

jps -> LocationPort: Where am I?
LocationPort -> cdto: Coordinates for position
cdto -> jps: Timmys current position coords

jps -> dbs: Coordinates for Turn 
dbs -> dbh: Coordinates for Turn 
dbh -> dbi: Coordinates for Turn 
dbi -> dbh: Coordinates
dbh -> cdto: Coordinates for destination
cdto -> dbs: Destination coords
dbs -> jps: Destination coords
jps -> TripFileHandler: Find journey
TripFileHandler -> Entur: Request trip data
Entur -> TripFileHandler: Entur-data
TripFileHandler -> tpdto: Converts data to DTO
tpdto -> bts: Sends DTO for handline
bts -> API
API -> Client: Journey information


@enduml
